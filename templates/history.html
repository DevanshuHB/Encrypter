<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Saved Recipes History - Encrypter</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
</head>
<body>
    <div id="container">
        <header>
            <h1>Saved Recipes History</h1>
            <div style="float: right;">
                Welcome, {{ session.username }}! <a href="{{ url_for('logout') }}">Logout</a> | <a href="{{ url_for('index') }}">Home</a>
            </div>
        </header>
        <main>
            {% if recipes %}
                <table border="1" cellpadding="8" cellspacing="0" style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Recipe Operations</th>
                            <th>Input Data</th>
                            <th>Output Data</th>
                            <th>Saved At</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for recipe in recipes %}
                        <tr>
                            <td>{{ recipe.name }}</td>
                            <td>
                                <ul>
                                {% for op in recipe.recipe_data %}
                                    <li>{{ op }}</li>
                                {% endfor %}
                                </ul>
                            </td>
                            <td><pre>{{ recipe.input_data }}</pre></td>
                            <td><pre>{{ recipe.output_data }}</pre></td>
                            <td>{{ recipe.created_at }}</td>
                            <td>
                                <form method="post" action="{{ url_for('delete_recipe', recipe_id=recipe.id) }}" onsubmit="return confirm('Are you sure you want to delete this recipe?');">
                                    <button type="submit" style="background-color: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">Delete</button>
                                </form>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <p>No saved recipes found.</p>
            {% endif %}
        </main>
    </div>
</body>
</html>
